rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    match /users/{userId} {
      allow read: if (
        request.auth != null
      );

      match /notes/{noteId} {
        allow read: if (
          request.auth != null &&
          request.auth.uid == userId
        );

        allow create: if (
          request.auth != null &&
          request.auth.uid == userId &&
          request.resource.data.note is string &&
          request.resource.data.note.size() >= 1
        );
      }
    }

    match /logs/{logId} {
      allow read: if (
        request.auth != null
      );
    }
  }
}
