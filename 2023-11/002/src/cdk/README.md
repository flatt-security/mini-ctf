# File Box

- [File Box](#file-box)
  - [概要](#概要)
  - [構成図](#構成図)
  - [サンドボックスドメインの活用](#サンドボックスドメインの活用)
  - [ポリシーによるアクセス制御](#ポリシーによるアクセス制御)

## 概要

File Boxは、S3を用いたファイル共有サービスです。
ユーザーは、Cognitoのユーザーとして作成され、S3のオブジェクトに対して、署名付きURLを用いて、ファイルの追加 / 取得 / 削除を行うことができます。

## 構成図

![構成図](./assets/image.png)

## サンドボックスドメインの活用

File Boxでは、S3からファイルを取得 / 追加 / 削除をする際は、S3の署名付きURLを使用します。
署名付きURLを用いることで、`<bucket>.s3.<region>.amazonaws.com`をSandBox Domainとして活用でき、XSSなどの脆弱性が発生した場合の影響範囲を狭めることができます。

## ポリシーによるアクセス制御

IAMおよびS3Bucketのポリシーは、できる限り、最小限の権限に設定しています。
また、テナントの管理は、Cognitoの属性にテナントIDを用い、その値をS3 ObjectのPrefixとして使用することで、テナントごとにS3 Objectを分離しています。
